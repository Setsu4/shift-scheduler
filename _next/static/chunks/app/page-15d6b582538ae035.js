(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{421:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>G});var t=s(5155),a=s(2115),l=s(9708),i=s(2085),n=s(2596),d=s(9688);function o(){for(var e=arguments.length,r=Array(e),s=0;s<e;s++)r[s]=arguments[s];return(0,d.QP)((0,n.$)(r))}let c=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=a.forwardRef((e,r)=>{let{className:s,variant:a,size:i,asChild:n=!1,...d}=e,u=n?l.DX:"button";return(0,t.jsx)(u,{className:o(c({variant:a,size:i,className:s})),ref:r,...d})});u.displayName="Button";let m=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:o("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});m.displayName="Card";let f=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:o("flex flex-col space-y-1.5 p-6",s),...a})});f.displayName="CardHeader";let x=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:o("text-2xl font-semibold leading-none tracking-tight",s),...a})});x.displayName="CardTitle";let h=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:o("text-sm text-muted-foreground",s),...a})});h.displayName="CardDescription";let p=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:o("p-6 pt-0",s),...a})});p.displayName="CardContent";let g=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:o("flex items-center p-6 pt-0",s),...a})});g.displayName="CardFooter";let j=a.forwardRef((e,r)=>{let{className:s,type:a,...l}=e;return(0,t.jsx)("input",{type:a,className:o("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:r,...l})});j.displayName="Input";var b=s(968);let v=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),N=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)(b.b,{ref:r,className:o(v(),s),...a})});N.displayName=b.b.displayName;var y=s(4073);let w=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsxs)(y.bL,{ref:r,className:o("relative flex w-full touch-none select-none items-center",s),...a,children:[(0,t.jsx)(y.CC,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,t.jsx)(y.Q6,{className:"absolute h-full bg-primary"})}),(0,t.jsx)(y.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"}),(0,t.jsx)(y.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});w.displayName=y.bL.displayName;var H=s(4218),k=s(6474),q=s(7863),C=s(5196);let R=H.bL;H.YJ;let T=H.WT,A=a.forwardRef((e,r)=>{let{className:s,children:a,...l}=e;return(0,t.jsxs)(H.l9,{ref:r,className:o("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...l,children:[a,(0,t.jsx)(H.In,{asChild:!0,children:(0,t.jsx)(k.A,{className:"h-4 w-4 opacity-50"})})]})});A.displayName=H.l9.displayName;let F=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)(H.PP,{ref:r,className:o("flex cursor-default items-center justify-center py-1",s),...a,children:(0,t.jsx)(q.A,{className:"h-4 w-4"})})});F.displayName=H.PP.displayName;let _=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)(H.wn,{ref:r,className:o("flex cursor-default items-center justify-center py-1",s),...a,children:(0,t.jsx)(k.A,{className:"h-4 w-4"})})});_.displayName=H.wn.displayName;let z=a.forwardRef((e,r)=>{let{className:s,children:a,position:l="popper",...i}=e;return(0,t.jsx)(H.ZL,{children:(0,t.jsxs)(H.UC,{ref:r,className:o("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:l,...i,children:[(0,t.jsx)(F,{}),(0,t.jsx)(H.LM,{className:o("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,t.jsx)(_,{})]})})});z.displayName=H.UC.displayName,a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)(H.JU,{ref:r,className:o("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...a})}).displayName=H.JU.displayName;let S=a.forwardRef((e,r)=>{let{className:s,children:a,...l}=e;return(0,t.jsxs)(H.q7,{ref:r,className:o("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...l,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(H.VF,{children:(0,t.jsx)(C.A,{className:"h-4 w-4"})})}),(0,t.jsx)(H.p4,{children:a})]})});function E(e){let{value:r,onChange:s,minHour:l=0,maxHour:i=23}=e,[n,d]=(0,a.useState)("9"),[o,c]=(0,a.useState)("00");(0,a.useEffect)(()=>{if(r){let[e,s]=r.split(":");d(e),c(s)}},[r]);let u=[];for(let e=l;e<=i;e++)u.push(e.toString());return(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsxs)(R,{value:n,onValueChange:e=>{d(e),s("".concat(e,":").concat(o))},children:[(0,t.jsx)(A,{className:"w-full",children:(0,t.jsx)(T,{placeholder:"時"})}),(0,t.jsx)(z,{children:u.map(e=>(0,t.jsxs)(S,{value:e,children:[e,"時"]},e))})]}),(0,t.jsxs)(R,{value:o,onValueChange:e=>{c(e),s("".concat(n,":").concat(e))},children:[(0,t.jsx)(A,{className:"w-full",children:(0,t.jsx)(T,{placeholder:"分"})}),(0,t.jsx)(z,{children:["00","15","30","45"].map(e=>(0,t.jsxs)(S,{value:e,children:[e,"分"]},e))})]})]})}S.displayName=H.q7.displayName,a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)(H.wv,{ref:r,className:o("-mx-1 my-1 h-px bg-muted",s),...a})}).displayName=H.wv.displayName;let V=(0,i.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function D(e){let{className:r,variant:s,...a}=e;return(0,t.jsx)("div",{className:o(V({variant:s}),r),...a})}var P=s(3453),L=s(4861);function M(e){let{workerAssignments:r}=e,s=e=>"".concat(e,":00"),a=e=>{if(0===e.length)return"なし";let r=[...e].sort((e,r)=>e-r),t=[],a=r[0],l=r[0];for(let e=1;e<r.length;e++)r[e]===l+1||(t.push([a,l]),a=r[e]),l=r[e];return t.push([a,l]),t.map(e=>{let[r,t]=e;return r===t?s(r):"".concat(s(r),"〜").concat(s(t+1))}).join(", ")};return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-medium",children:"個人別シフト"}),r.map(e=>{let r=null===e.requiredHours||e.totalHours>=e.requiredHours;return(0,t.jsxs)(m,{className:"border-l-4 ".concat(r?"border-l-green-500":"border-l-red-500"),children:[(0,t.jsx)(f,{className:"pb-2",children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)(x,{className:"text-base",children:e.name}),(0,t.jsxs)(D,{variant:r?"default":"destructive",children:[e.totalHours,"時間",null!==e.requiredHours&&"/".concat(e.requiredHours,"時間")]})]})}),(0,t.jsx)(p,{children:(0,t.jsxs)("div",{className:"flex items-center text-sm",children:[r?(0,t.jsx)(P.A,{className:"h-4 w-4 text-green-500 mr-2"}):(0,t.jsx)(L.A,{className:"h-4 w-4 text-red-500 mr-2"}),(0,t.jsx)("span",{children:a(e.assignedHours)})]})})]},e.id)})]})}let U=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:r,className:o("w-full caption-bottom text-sm",s),...a})})});U.displayName="Table";let I=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("thead",{ref:r,className:o("[&_tr]:border-b",s),...a})});I.displayName="TableHeader";let B=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("tbody",{ref:r,className:o("[&_tr:last-child]:border-0",s),...a})});B.displayName="TableBody",a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("tfoot",{ref:r,className:o("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...a})}).displayName="TableFooter";let J=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("tr",{ref:r,className:o("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...a})});J.displayName="TableRow";let O=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("th",{ref:r,className:o("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...a})});O.displayName="TableHead";let Q=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("td",{ref:r,className:o("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...a})});function W(e){let{hourlyAssignments:r}=e,s=[...r].sort((e,r)=>e.hour-r.hour);return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-lg font-medium",children:"時間帯別シフト"}),(0,t.jsxs)(U,{children:[(0,t.jsx)(I,{children:(0,t.jsxs)(J,{children:[(0,t.jsx)(O,{className:"w-24",children:"時間"}),(0,t.jsx)(O,{children:"勤務者"}),(0,t.jsx)(O,{className:"text-right w-16",children:"人数"})]})}),(0,t.jsx)(B,{children:s.map(e=>(0,t.jsxs)(J,{children:[(0,t.jsxs)(Q,{className:"font-medium",children:[e.hour,":00"]}),(0,t.jsx)(Q,{children:e.workers.length>0?e.workers.join(", "):(0,t.jsx)("span",{className:"text-muted-foreground italic",children:"なし"})}),(0,t.jsx)(Q,{className:"text-right",children:e.workers.length})]},e.hour))})]})]})}Q.displayName="TableCell",a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("caption",{ref:r,className:o("mt-4 text-sm text-muted-foreground",s),...a})}).displayName="TableCaption";var X=s(4616),Y=s(2525);let Z=Array.from({length:17},(e,r)=>r+6),$=e=>{let[r,s]=e.split(":").map(Number);return r+s/60};function G(){let[e,r]=(0,a.useState)([]),[s,l]=(0,a.useState)(Z.map(e=>({hour:e,required:1}))),[i,n]=(0,a.useState)([{id:"req-".concat(Date.now()),startHour:6,endHour:22,required:1}]),[d,o]=(0,a.useState)(null),[c,b]=(0,a.useState)({id:"worker-",name:"",startTime:"9:00",endTime:"17:00",requiredHours:null});(0,a.useEffect)(()=>{b(e=>({...e,id:"worker-".concat(Date.now())}))},[]);let v=s=>{r(e.filter(e=>e.id!==s))},y=e=>{n(i.filter(r=>r.id!==e))},H=(e,r)=>{n(i.map(s=>s.id===e?{...s,...r}:s))};return(0,t.jsxs)("div",{className:"container mx-auto py-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-8 text-center",children:"シフト作成補助アプリ"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,t.jsxs)(m,{children:[(0,t.jsxs)(f,{children:[(0,t.jsx)(x,{children:"出勤希望者情報"}),(0,t.jsx)(h,{children:"出勤希望者の名前と希望時間を入力してください"})]}),(0,t.jsxs)(p,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(N,{htmlFor:"name",children:"名前"}),(0,t.jsx)(j,{id:"name",value:c.name,onChange:e=>b({...c,name:e.target.value}),placeholder:"名前を入力"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(N,{htmlFor:"requiredHours",children:"必須勤務時間 (時間)"}),(0,t.jsx)(j,{id:"requiredHours",type:"number",min:"0",max:"16",value:null===c.requiredHours?"":c.requiredHours,onChange:e=>{let r=""===e.target.value?null:Number(e.target.value);b({...c,requiredHours:r})},placeholder:"必要な場合のみ"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(N,{htmlFor:"startTime",children:"開始時間"}),(0,t.jsx)(E,{value:c.startTime,onChange:e=>b({...c,startTime:e}),minHour:6,maxHour:21})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(N,{htmlFor:"endTime",children:"終了時間"}),(0,t.jsx)(E,{value:c.endTime,onChange:e=>b({...c,endTime:e}),minHour:7,maxHour:22})]})]}),(0,t.jsxs)(u,{onClick:()=>{c.name&&(r([...e,{...c}]),b({id:"worker-".concat(Date.now()),name:"",startTime:"9:00",endTime:"17:00",requiredHours:null}))},className:"w-full",children:[(0,t.jsx)(X.A,{className:"mr-2 h-4 w-4"})," 希望者を追加"]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("h3",{className:"font-medium",children:["登録済み希望者 (",e.length,"人)"]}),0===e.length?(0,t.jsx)("p",{className:"text-muted-foreground text-sm",children:"希望者が登録されていません"}):(0,t.jsx)("div",{className:"space-y-2",children:e.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-md",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:e.name}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.startTime," 〜 ",e.endTime,null!==e.requiredHours&&" (必須: ".concat(e.requiredHours,"時間)")]})]}),(0,t.jsx)(u,{variant:"ghost",size:"icon",onClick:()=>v(e.id),children:(0,t.jsx)(Y.A,{className:"h-4 w-4"})})]},e.id))})]})]})]}),(0,t.jsxs)(m,{children:[(0,t.jsxs)(f,{children:[(0,t.jsx)(x,{children:"時間帯ごとの必要人数"}),(0,t.jsx)(h,{children:"時間帯と必要な人数を設定してください"})]}),(0,t.jsxs)(p,{className:"space-y-6",children:[i.map(e=>(0,t.jsxs)("div",{className:"space-y-4 p-4 border rounded-md",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("h4",{className:"font-medium",children:["時間帯 ",e.startHour,":00 〜 ",e.endHour,":00"]}),i.length>1&&(0,t.jsx)(u,{variant:"ghost",size:"icon",onClick:()=>y(e.id),children:(0,t.jsx)(Y.A,{className:"h-4 w-4"})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)(N,{children:"時間範囲"}),(0,t.jsxs)("span",{className:"text-sm text-muted-foreground",children:[e.startHour,":00 〜 ",e.endHour,":00"]})]}),(0,t.jsx)("div",{className:"pt-4",children:(0,t.jsx)(w,{value:[e.startHour,e.endHour],min:6,max:22,step:1,minStepsBetweenThumbs:1,onValueChange:r=>{let[s,t]=r;return H(e.id,{startHour:s,endHour:t})}})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(N,{htmlFor:"required-".concat(e.id),children:"必要人数"}),(0,t.jsxs)(R,{value:e.required.toString(),onValueChange:r=>H(e.id,{required:Number.parseInt(r)}),children:[(0,t.jsx)(A,{id:"required-".concat(e.id),children:(0,t.jsx)(T,{placeholder:"人数を選択"})}),(0,t.jsxs)(z,{children:[(0,t.jsx)(S,{value:"1",children:"1人"}),(0,t.jsx)(S,{value:"2",children:"2人"}),(0,t.jsx)(S,{value:"3",children:"3人"})]})]})]})]},e.id)),(0,t.jsxs)(u,{onClick:()=>{n([...i,{id:"req-".concat(Date.now()),startHour:6,endHour:22,required:1}])},variant:"outline",className:"w-full",children:[(0,t.jsx)(X.A,{className:"mr-2 h-4 w-4"})," 時間帯を追加"]})]}),(0,t.jsx)(g,{children:(0,t.jsx)(u,{onClick:()=>{let r={},s={};Z.forEach(e=>{r[e]=[]}),e.forEach(e=>{s[e.id]=[]});let t=e.map(e=>{let r=$(e.startTime),s=$(e.endTime);return{...e,startHour:r,endHour:s,availableHours:Z.filter(e=>e>=Math.floor(r)&&e<Math.ceil(s))}});Z.forEach(e=>{let a=i.filter(r=>e>=r.startHour&&e<r.endHour),l=a.length>0?Math.max(...a.map(e=>e.required)):0,n=[...t.filter(r=>r.availableHours.includes(e))].sort((e,r)=>{var t,a;let l=(null===(t=s[e.id])||void 0===t?void 0:t.length)||0,i=(null===(a=s[r.id])||void 0===a?void 0:a.length)||0;return null!==e.requiredHours&&null!==r.requiredHours?l/e.requiredHours-i/r.requiredHours:null!==e.requiredHours?-1:null!==r.requiredHours?1:l-i});for(let t=0;t<Math.min(l,n.length);t++){let a=n[t];r[e].push(a.id),s[a.id].push(e)}}),o({hourlyAssignments:Object.entries(r).map(r=>{let[s,t]=r;return{hour:Number.parseInt(s),workers:t.map(r=>{let s=e.find(e=>e.id===r);return s?s.name:"Unknown"})}}),workerAssignments:e.map(e=>{var r;return{id:e.id,name:e.name,assignedHours:s[e.id]||[],totalHours:(null===(r=s[e.id])||void 0===r?void 0:r.length)||0,requiredHours:e.requiredHours}})})},className:"w-full",disabled:0===e.length,children:"シフトを計算する"})})]})]}),d&&(0,t.jsx)("div",{className:"mt-8",children:(0,t.jsxs)(m,{children:[(0,t.jsxs)(f,{children:[(0,t.jsx)(x,{children:"シフト計算結果"}),(0,t.jsx)(h,{children:"最適化されたシフト割り当て"})]}),(0,t.jsx)(p,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,t.jsx)(M,{workerAssignments:d.workerAssignments}),(0,t.jsx)(W,{hourlyAssignments:d.hourlyAssignments})]})})]})})]})}},1776:(e,r,s)=>{Promise.resolve().then(s.bind(s,421))}},e=>{var r=r=>e(e.s=r);e.O(0,[414,441,684,358],()=>r(1776)),_N_E=e.O()}]);